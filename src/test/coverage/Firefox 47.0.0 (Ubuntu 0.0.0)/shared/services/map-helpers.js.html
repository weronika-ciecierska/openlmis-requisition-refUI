<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for shared/services/map-helpers.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">shared/services/map-helpers.js</span></h1>
    <h2>
        Statements: <span class="metric">17.86% <small>(5 / 28)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">0% <small>(0 / 8)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">0% <small>(0 / 6)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">17.86% <small>(5 / 28)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">shared/services/</a> &#187; map-helpers.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 * Electronic Logistics Management Information System (eLMIS) is a supply chain management system for health commodities in a developing country setting.
 *
 * Copyright (C) 2015  John Snow, Inc (JSI). This program was produced for the U.S. Agency for International Development (USAID). It was prepared under the USAID | DELIVER PROJECT, Task Order 4.
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
&nbsp;
<span class="fstat-no" title="function not covered" >function interpolate(value, count) {</span>
<span class="cstat-no" title="statement not covered" >  var val = parseFloat(value) / parseFloat(count);</span>
<span class="cstat-no" title="statement not covered" >  var interpolator = chroma.interpolate.bezier(['red', 'yellow', 'green']);</span>
<span class="cstat-no" title="statement not covered" >  return interpolator(val).hex();</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function initiateMap(scope) {</span>
<span class="cstat-no" title="statement not covered" >  angular.extend(scope, {</span>
    layers: {
      baselayers: {
        googleTerrain: {
          name: 'Terrain',
          layerType: 'TERRAIN',
          type: 'google'
        },
        googleHybrid: {
          name: 'Hybrid',
          layerType: 'HYBRID',
          type: 'google'
        },
        googleRoadmap: {
          name: 'Streets',
          layerType: 'ROADMAP',
          type: 'google'
        }
      }
    },
    legend: {
      position: 'bottomleft',
      colors: ['#FF0000', '#FFFF00', '#5eb95e', "#000000"],
      labels: ['Non Reporting', 'Partial Reporting ', 'Fully Reporting', 'Not expected to Report']
    }
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  scope.indicator_types = [</span>
    {
      code: 'ever_over_total',
      name: 'Ever Reported / Total Facilities'
    },
    {
      code: 'ever_over_expected',
      name: 'Ever Reported / Expected Facilities'
    },
    {
      code: 'period_over_expected',
      name: 'Reported during period / Expected Facilities'
    }
  ];
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >  scope.viewOptins = [</span>
    {id: '0', name: 'Non Reporting Only'},
    {id: '1', name: 'Reporting Only'},
    {id: '2', name: 'All'}
  ];
&nbsp;
}
&nbsp;
<span class="fstat-no" title="function not covered" >function popupFormat(feature) {</span>
<span class="cstat-no" title="statement not covered" >  return '&lt;table class="table table-bordered" style="width: 250px"&gt;&lt;tr&gt;&lt;th colspan="2"&gt;&lt;b&gt;' + feature.properties.name + '&lt;/b&gt;&lt;/th&gt;&lt;/tr&gt;' +</span>
    '&lt;tr&gt;&lt;td&gt;Expected Facilities&lt;/td&gt;&lt;td class="number"&gt;' + feature.expected + '&lt;/td&gt;&lt;/tr&gt;' +
    '&lt;tr&gt;&lt;td&gt;Reported This Period&lt;/td&gt;&lt;td class="number"&gt;' + feature.period + '&lt;/td&gt;&lt;/tr&gt;' +
    '&lt;tr&gt;&lt;td&gt;Ever Reported&lt;/td&gt;&lt;td class="number"&gt;' + feature.ever + '&lt;/td&gt;&lt;/tr&gt;' +
    '&lt;tr&gt;&lt;td class="bold"&gt;Total Facilities&lt;/b&gt;&lt;/td&gt;&lt;td class="number bold"&gt;' + feature.total + '&lt;/td&gt;&lt;/tr&gt;';
}
&nbsp;
<span class="fstat-no" title="function not covered" >function onEachFeature(feature, layer) {</span>
<span class="cstat-no" title="statement not covered" >  layer.bindPopup(popupFormat(feature));</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function zoomAndCenterMap (leafletData, $scope) {</span>
<span class="cstat-no" title="statement not covered" >  leafletData.getMap().then(<span class="fstat-no" title="function not covered" >function (map) {</span></span>
<span class="cstat-no" title="statement not covered" >    var latlngs = [];</span>
<span class="cstat-no" title="statement not covered" >    for (var c = 0; c &lt; $scope.features.length; c++) {</span>
<span class="cstat-no" title="statement not covered" >      if ($scope.features[c].geometry === null || angular.isUndefined($scope.features[c].geometry))</span>
<span class="cstat-no" title="statement not covered" >        continue;</span>
<span class="cstat-no" title="statement not covered" >      if ($scope.features[c].geometry.coordinates === null || angular.isUndefined($scope.features[c].geometry.coordinates))</span>
<span class="cstat-no" title="statement not covered" >        continue;</span>
<span class="cstat-no" title="statement not covered" >      for (var i = 0; i &lt; $scope.features[c].geometry.coordinates.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >        var coord = $scope.features[c].geometry.coordinates[i];</span>
<span class="cstat-no" title="statement not covered" >        for (var j=0; j &lt; coord.length; j++) {</span>
<span class="cstat-no" title="statement not covered" >          var points = coord[j];</span>
<span class="cstat-no" title="statement not covered" >          for(var p in points){</span>
<span class="cstat-no" title="statement not covered" >            var latlng = L.GeoJSON.coordsToLatLng(points[p]);</span>
<span class="cstat-no" title="statement not covered" >            latlngs.push(latlng);</span>
          }
        }
      }
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    map.fitBounds(latlngs);</span>
  });
}
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Aug 22 2016 17:38:32 GMT+0200 (CEST)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
